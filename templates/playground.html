{% extends "base.html" %}

{% block content %}
<section class="dashboard">
    <div class="welcome-card">
        <h1>XSS Playground</h1>
        <p>This is a safe environment to test various XSS payloads and observe how they're rendered and executed.</p>
    </div>
    
    <div class="challenge-container">
        <div class="challenge-card">
            <h2><i class="fas fa-code"></i> Test Payloads</h2>
            
            <div class="form-group">
                <label for="playground-input">Enter your XSS payload:</label>
                <textarea id="playground-input" placeholder="Try different XSS payloads here..." style="min-height: 150px;"></textarea>
                <button onclick="testPayload()" class="btn btn-primary" style="margin-top: 10px;">Test Payload</button>
            </div>
            
            <div class="hint-box">
                <h3><i class="fas fa-lightbulb"></i> Sample Payloads</h3>
                <ul>
                    <li><code>&lt;script&gt;alert(1)&lt;/script&gt;</code></li>
                    <li><code>&lt;img src=x onerror=alert(1)&gt;</code></li>
                    <li><code>javascript:alert(1)</code></li>
                    <li><code>&lt;svg onload=alert(1)&gt;</code></li>
                </ul>
            </div>
        </div>
        
        <div class="challenge-card">
            <h2><i class="fas fa-flask"></i> Test Results</h2>
            <p>Payload will be rendered in these different contexts:</p>
            
            <h3 style="margin-top: 1.5rem;">Direct HTML Injection</h3>
            <div id="direct-html" class="result-box" style="min-height: 80px;"></div>
            
            <h3 style="margin-top: 1.5rem;">Attribute Context</h3>
            <div id="attribute-context" class="result-box" style="min-height: 80px;">
                <img src="x" alt="test image with payload in alt attribute" id="attr-test">
            </div>
            
            <h3 style="margin-top: 1.5rem;">JavaScript Context</h3>
            <div id="js-context" class="result-box" style="min-height: 80px;"></div>
        </div>
    </div>
    
    <script>
        function testPayload() {
            const payload = document.getElementById('playground-input').value;
            
            // Test direct HTML injection
            document.getElementById('direct-html').innerHTML = payload;
            
            // Test attribute context
            document.getElementById('attr-test').setAttribute('alt', payload);
            
            // Test JavaScript context
            try {
                eval(payload);
                document.getElementById('js-context').textContent = "Payload executed (check console for errors)";
            } catch (e) {
                document.getElementById('js-context').textContent = "Error executing payload: " + e.message;
            }
        }
    </script>
</section>
{% endblock %}
